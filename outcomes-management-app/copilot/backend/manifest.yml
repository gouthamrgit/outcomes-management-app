name: backend
type: Load Balanced Web Service

image:
  build: backend/Dockerfile
  port: 8080

http:
  path: '/api'
  healthcheck: '/'

cpu: 256
memory: 512
count: 1

variables:
  DYNAMODB_TABLE_NAME: outcomes-management-app-dev-backend-Table
  AWS_REGION: us-east-1

task_role: |
  Version: '2012-10-17'
  Statement:
    - Effect: Allow
      Action:
        - dynamodb:PutItem
        - dynamodb:GetItem
        - dynamodb:UpdateItem
        - dynamodb:DeleteItem
        - dynamodb:Scan
        - dynamodb:Query
        - dynamodb:DescribeTable
      Resource: "*"

addons:
  - dynamodb.yml

environments:
  dev:
    variables:
      DYNAMODB_TABLE_NAME: outcomes-management-app-dev-backend-Table